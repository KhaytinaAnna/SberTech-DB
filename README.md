# Уровни изоляции

## Шаг 1: создание таблицы и заполнение её данными

Создание бд bank и подключение к ней:

![img_2.png](img/img_2.png)

Создание таблицу:

![img_3.png](img/img_3.png)

Наполнение её данными, как в статье:

![img_4.png](img/img_4.png)

## Шаг 2: Read uncommitted

- Запуск 2 параллельных транзакций. Выполнение `SELECT * FROM`.

  ![img_8.png](img/img_8.png)

- Выполнение `INSERT`, `DELETE`, `UPDATE` в одной транзакции. Выполнение `SELECT * FROM` в другой транзакции. Выполнение запрос `SUM(balance)`

  ![img_9.png](img/img_9.png)

- Выполнение `ROLLBACK` в первой транзакции. Выполнение `SELECT SUM(balance) FROM accounts` во второй транзакции

  ![img_10.png](img/img_10.png)

**Вывод**: вторая транзакция независима от первой транзакции, изменения не подтягиваются. В postgre отсутствует Read uncommitted 

## Шаг 3: Read committed

- Запуск 2 параллельных транзакций. Выполнение `SELECT * FROM`.

  ![img_8.png](img/img_8.png)

- Выполнение `INSERT`, `DELETE`, `UPDATE` в одной транзакции.

  ![img_12.png](img/img_12.png)

- Выполнение COMMIT в первой транзакции

  ![img_13.png](img/img_13.png)

**Вывод**: вторая транзакция видит только закомиченные изменения первой

## Шаг 4: Repeatable read

- Запуск 2 параллельных транзакций. Выполнить `SELECT * FROM`

  ![img_14.png](img/img_14.png)

- Выполнение `INSERT`, `DELETE`, `UPDATE` в одной транзакции. Выполнение `UPDATE` той же строки во второй транзакции

  ![img_17.png](img/img_17.png)

- Закоммитить изменения первой транзакции
  
  ![img_18.png](img/img_18.png)

- Выполнение `SELECT * FROM` во второй транзакции
  
  ![img_19.png](img/img_19.png)  

**Вывод**: нельзя изменить данные в одной транзакции, не закоммитив изменения в другой

## Шаг 5: Serializable

- Запуск 2 параллельные транзакции. Выполнить `SELECT * FROM`.
  
  ![img_20.png](img/img_20.png)

- Выполнение `UPDATE`, `INSERT`, `DELETE` в первой транзакции. Выполнение `SELECT * FROM` в обеих транзакциях.

  (переименование Пети в Ивана) 

  ![img_21.png](img/img_21.png)

  (внесены ещё изменения)  

  ![img_22.png](img/img_22.png)

Вывод: каждая транзакция видит только свои изменения
